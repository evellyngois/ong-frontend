<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ONG Esperança — Cadastro</title>
  <meta name="description" content="Cadastre-se para ser voluntário(a) ou apoiador(a). Formulário com validação e máscaras." />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-grid">
      <a class="brand" href="index.html">
        <img src="img/logo.jpeg" alt="Logo da ONG Esperança" class="logo">
        <span>ONG Esperança</span>
      </a>
      <nav aria-label="Navegação principal">
        <ul class="menu">
          <li><a href="index.html">Início</a></li>
          <li><a href="projetos.html">Projetos</a></li>
          <li><a href="cadastro.html" aria-current="page">Cadastro</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="conteudo" class="container">
    <h1>Cadastro</h1>
    <p>Preencha seus dados para participar como voluntário(a) ou apoiador(a).</p>

    <form id="formCadastro" novalidate>
      <fieldset>
        <legend>Dados Pessoais</legend>

        <label for="nome">Nome Completo</label>
        <input id="nome" name="nome" type="text" required placeholder="Seu nome" autocomplete="name">

        <label for="email">E-mail</label>
        <input id="email" name="email" type="email" required placeholder="voce@exemplo.com" autocomplete="email">

        <label for="cpf">CPF</label>
        <input
          id="cpf" name="cpf" type="text" inputmode="numeric" required
          placeholder="000.000.000-00"
          pattern="[0-9]{3}\.[0-9]{3}\.[0-9]{3}-[0-9]{2}"
          title="Formato: 000.000.000-00"
          aria-describedby="dica-cpf"
        >
        <small id="dica-cpf" class="hint">Use apenas números; a máscara será aplicada.</small>

        <label for="telefone">Telefone</label>
        <input
          id="telefone" name="telefone" type="tel" required
          placeholder="(00) 00000-0000"
          pattern="\([0-9]{2}\) [0-9]{5}-[0-9]{4}"
          title="Formato: (00) 00000-0000"
          autocomplete="tel"
        >

        <label for="nascimento">Data de Nascimento</label>
        <input id="nascimento" name="nascimento" type="date" required>
      </fieldset>

      <fieldset>
        <legend>Endereço</legend>

        <label for="endereco">Endereço</label>
        <input id="endereco" name="endereco" type="text" required placeholder="Rua, número, complemento">

        <label for="cep">CEP</label>
        <input
          id="cep" name="cep" type="text" inputmode="numeric" required
          placeholder="00000-000"
          pattern="[0-9]{5}-[0-9]{3}"
          title="Formato: 00000-000"
          autocomplete="postal-code"
        >

        <div class="grid-2">
          <div>
            <label for="cidade">Cidade</label>
            <input id="cidade" name="cidade" type="text" required>
          </div>
          <div>
            <label for="estado">Estado</label>
            <input id="estado" name="estado" type="text" required maxlength="2" placeholder="UF">
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend>Preferências</legend>

        <label for="area">Área de interesse</label>
        <select id="area" name="area" required>
          <option value="">Selecione...</option>
          <option>Educação</option>
          <option>Saúde</option>
          <option>Meio Ambiente</option>
          <option>Administrador(a)</option>
        </select>

        <label for="disponibilidade">Disponibilidade semanal (horas)</label>
        <input id="disponibilidade" name="disponibilidade" type="number" min="1" max="40" required>
      </fieldset>

      <button type="submit">Enviar cadastro</button>

      <!-- Mensagem de sucesso (fica escondida até enviar) -->
      <p id="mensagem" class="success" hidden>Cadastro enviado com sucesso! ✅</p>
    </form>

    <!-- Script inline: máscaras + mensagem de sucesso -->
    <script>
    (function () {
      const form = document.getElementById("formCadastro");
      const box  = document.getElementById("mensagem");
      if (!form || !box) return;

      // ===== Máscaras =====
      function maskCPF(i){
        let v = i.value.replace(/\D/g, "").slice(0,11);
        v = v.replace(/(\d{3})(\d)/, "$1.$2")
             .replace(/(\d{3})(\d)/, "$1.$2")
             .replace(/(\d{3})(\d{1,2})$/, "$1-$2");
        i.value = v;
      }
      function maskTel(i){
        let v = i.value.replace(/\D/g, "").slice(0,11);
        v = v.replace(/(\d{2})(\d)/, "($1) $2")
             .replace(/(\d{5})(\d{4})$/, "$1-$2");
        i.value = v;
      }
      function maskCEP(i){
        let v = i.value.replace(/\D/g, "").slice(0,8);
        v = v.replace(/(\d{5})(\d)/, "$1-$2");
        i.value = v;
      }

      const cpf = document.getElementById("cpf");
      const tel = document.getElementById("telefone");
      const cep = document.getElementById("cep");
      if (cpf){ cpf.addEventListener("input", ()=>maskCPF(cpf)); cpf.addEventListener("blur", ()=>maskCPF(cpf)); }
      if (tel){ tel.addEventListener("input", ()=>maskTel(tel)); }
      if (cep){ cep.addEventListener("input", ()=>maskCEP(cep)); }

      // ===== Envio + mensagem de sucesso =====
      function showSuccess(text="Cadastro enviado com sucesso! ✅") {
        box.textContent = text;
        box.hidden = false;           // tira 'hidden'
        box.style.display = "block";  // garante visível (mesmo se algo setou display:none)
        box.scrollIntoView({behavior:"smooth", block:"center"});
      }
      function hideSuccess() {
        box.hidden = true;
        box.style.display = "";       // limpa override
      }

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        // usa validação nativa primeiro
        if (!form.checkValidity()){
          form.reportValidity();
          return;
        }

        showSuccess();           // mostra já
        setTimeout(() => form.reset(), 1000);  // limpa depois de 1s (fica claro que enviou)
        setTimeout(hideSuccess, 3500);         // esconde após ~3,5s
      });
    })();
    </script>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 ONG Esperança — <a href="#conteudo">Voltar ao topo</a></p>
    </div>
  </footer>

  <!-- NADA de script externo aqui para evitar conflito com o inline -->
</body>
</html>
